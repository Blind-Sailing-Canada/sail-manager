<mat-card *ngIf="user">
  <mat-card-header>
    <div mat-card-avatar>
      <mat-icon>troubleshoot</mat-icon>
    </div>
    <mat-card-title
      role="heading"
      tabindex="0"
      id="pageTitle"
    >DB Query Runner</mat-card-title>
  </mat-card-header>
  <mat-card-actions>
  </mat-card-actions>
  <mat-card-content>
    <div class="query-controls">
      <mat-form-field
        [(ngModel)]="query"
        ngDefaultControl
      >
        <mat-label
          aria-hidden="true"
          tabindex="-1"
        >Query</mat-label>
        <textarea
          cdkAutosizeMaxRows="10"
          cdkAutosizeMinRows="2"
          cdkTextareaAutosize
          matInput
          type="text"
        >{{query}}</textarea>
      </mat-form-field>
      <button
        mat-raised-button
        title="Run query"
        (click)="runQuery()"
      >Run</button>
    </div>
    <div class="mat-elevation-z2">
      <table
        mat-table
        [dataSource]="dataSource"
        matSort
      >
        <ng-container
          [matColumnDef]="header"
          *ngFor="let header of headers"
        >
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
          > {{header}} </th>
          <td
            mat-cell
            *matCellDef="let element"
            class="break-all"
          > {{element[header]}} </td>
        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="headers"
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: headers;"
        ></tr>
      </table>

      <mat-paginator
        [pageSizeOptions]="[1, 10, 50, 100]"
        showFirstLastButtons
        aria-label="Select page results"
      ></mat-paginator>
    </div>
  </mat-card-content>
  <mat-card-footer>
    <mat-card-actions>
    </mat-card-actions>
  </mat-card-footer>
</mat-card>
